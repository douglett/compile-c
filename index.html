<!DOCTYPE html>
<html>
<head>
	<title>compile-c</title>
</head>
<body>

<div id="showprog"></div>
<div id="showout"></div>
<div id="showast"></div>

<style type="text/css">
#showprog, #showout, #showast {
	white-space: pre; 
	font-family: monospace;
	border: 1px solid black;
	box-sizing: border-box;
	padding: 5px;
	margin-bottom: 10px;
}
#showprog, #showout {
	display: inline-block;
	width: 45%;
	vertical-align: top;
}
</style>

</body>
</html>

<script type="text/javascript" src="tokens.js"></script>
<script type="text/javascript" src="parser.js"></script>
<script type="text/javascript" src="compilerjs.js"></script>

<script type="text/javascript">
let prog = 
`int test;
int testy=10;
int func() {
	int test2 = 1000 * (4 + 4);
	test = 11*2;
	return 4;
}
int main() {
	func();
	return 123;
}`;

const runshow = (prog) => {
	document.querySelector('#showprog').innerHTML = prog;
	Parser.parse(prog);
	if (Parser.error) return;
	document.querySelector('#showast').innerHTML = Parser.showast();
	Compiler.compile(Parser.prog);
	if (Compiler.error) return;
	document.querySelector('#showout').innerHTML = Compiler.prog;
	const res = Compiler.run();
	document.querySelector('#showout').innerHTML += `\n\n::output:: ${res}`;
};

runshow(prog);

</script>